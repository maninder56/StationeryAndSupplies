@page
@model StationeryAndSuppliesWebApp.Pages.Account.OrdersModel
@{
    Layout = "_ProfileNavigationLayout";
    ViewData["Title"] = "Orders"; 
}



<section class="user-orders-section">
    <header>Most Recent Orders</header>
    @if(Model.ErrorMessage is not null)
    {
        <div class="error-message">@Model.ErrorMessage</div>
    }
    else if (Model.OrderDetailsList is not null && Model.OrderDetailsList.Count == 0)
    {
        <div class="no-orders-text">No Orders Found</div>
    }
    else
    {
        @foreach(var order in Model.OrderDetailsList!)
        {
            <div class="order-details-container">
                <div class="order-items">
                    <div class="title">Order Items</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Price</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                            @if(order.OrderItems.Count == 0)
                            {
                                <tr>
                                    <td colspan="3">Error while loading products</td>
                                </tr>
                            }
                            else
                            {
                                @foreach (var product in order.OrderItems)
                                {
                                    <tr>
                                        <td>@product.ProductName</td>
                                        <td>£ @product.UnitPrice</td>
                                        <td>@product.Quantity</td>
                                    </tr>
                                }
                            }
                        </tbody>
                    </table>
                </div>
                <div>
                    <div>
                        <div>
                            <div>Order Date</div>
                            <dvi>@order.OrderDate</dvi>
                        </div>
                        <div>
                            <div>Status</div>
                            <div>@order.Status</div>
                        </div>
                    </div>
                    <div>
                        <div>Total: £</div>
                        <div>@order.TotalAmount</div>
                    </div>
                </div>
            </div>
        }
    }
</section>

